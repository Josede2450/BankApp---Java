<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
</head>
<body>

<div class="container">
    <h2 class="mt-5 mb-4 text-center">Login</h2>

    <!-- Flash success message (e.g. "Setup link sent") -->
    <!-- Flash success message -->
    <div th:if="${message}" class="alert alert-success text-center" th:text="${message}"></div>

    <!-- Flash error message -->
    <div th:if="${error}" class="alert alert-danger text-center" th:text="${error}"></div>

    <!-- Spring Security Login Form -->
    <form th:action="@{/login}" method="post" class="mx-auto" style="max-width: 400px;">
        <div class="mb-3">
            <label for="username" class="form-label">Email address</label>
            <input type="text" class="form-control" id="username" name="username" required>
        </div>

        <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" name="password" required>
        </div>

        <button type="submit" class="btn btn-primary w-100">Login</button>

        <!-- Error message from custom failure handler -->
        <div class="alert alert-danger text-center mt-3" th:if="${param.error}">
            <span th:text="${param.error}">Invalid credentials.</span>
        </div>

        <div class="text-success text-center mt-2" th:if="${param.logout}">
            You have been logged out.
        </div>

        <div class="text-center mt-4">
            <hr>
            <p class="mb-3">or login with</p>
            <a href="/oauth2/authorization/google" class="btn btn-outline-danger w-100">
                <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google logo" style="height: 20px; margin-right: 8px;">
                Login with Google
            </a>
        </div>

        <div class="text-center mt-3">
            <a href="/users/request-account" class="btn btn-outline-secondary w-100 mt-3">Create an account</a>
        </div>

        <div class="text-center mt-3">
            <a href="/users/forgot-password" class="btn btn-link">Forgot your password?</a>
        </div>

    </form>


</div>

</body>
</html>
